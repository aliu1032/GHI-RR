"0","print(paste('OLI_Claim2Rev.R : summarize Payment & Adjustment numbers start',Sys.time(), sep = "" ""))"
"1","[1]"
"1"," ""OLI_Claim2Rev.R : summarize Payment & Adjustment numbers start 2018-05-09 11:13:57"""
"1","
"
"0","# flipping the sign of adjustments except Refund"
"0","a <- which((!is.na(Pymnt$GHIAdjustmentCode)) & (Pymnt$GHIAdjustmentCode != 'GH04'))"
"0","Pymnt[a,""TXNAmount""] <- Pymnt[a,""TXNAmount""] * -1"
"0","# flip the sign of Payor & Patient payment"
"0","a <- which(Pymnt$TXNType %in% c('RI',""RP""))"
"0","Pymnt[a,""TXNAmount""] <- Pymnt[a,""TXNAmount""] * -1"
"0","Summarized_Payor_Pymnt <- Pymnt[Pymnt$TXNType=='RI',] %>%"
"0","                          group_by_(.dots=grp_var) %>%"
"0","                          summarize(PayorPaid = sum(TXNAmount))"
"0","Summarized_Patient_Pymnt <- Pymnt[Pymnt$TXNType=='RP',] %>%"
"0","                            group_by_(.dots=grp_var) %>%"
"0","                            summarize(PatientPaid = sum(TXNAmount))"
"0","# calculate the total adjustment, excluding charge in error (GH04) and refund & refund reversal (GH09)"
"0","a <- which( Pymnt$TXNType %in% c('AD','AC') &"
"0","            (Pymnt$GHIAdjustmentCode != 'GH04' & Pymnt$GHIAdjustmentCode != 'GH09')"
"0","          )"
"0","Summarized_Adjustment <- Pymnt[a,] %>%"
"0","                         group_by_(.dots=grp_var) %>%"
"0","                         summarize('Total Adjustment' = sum(TXNAmount))"
"0","# calculate the subTotal per Adjustment group"
"0","a <- which(Pymnt$TXNType %in% c('AD','AC') & Pymnt$OLIID != '')"
"0","temp <- melt(Pymnt[a,c(grp_var,'AdjustmentGroup','TXNAmount')], id.vars=c(grp_var,'AdjustmentGroup'))"
"0","Summarized_Adj_group <- dcast(temp, ...~variable, sum, na.rm=TRUE)"
"0","Summarized_Adj_group <- dcast(Summarized_Adj_group,"
"0","                              paste(paste(grp_var,collapse = ""+""),""AdjustmentGroup"",sep=""~""),"
"0","                              value.var = 'TXNAmount')"
"0","rm(temp)"
"0","print(paste('OLI_Claim2Rev.R : summarize Payment & Adjustment numbers finish',Sys.time(), sep = "" ""))"
"1","[1]"
"1"," ""OLI_Claim2Rev.R : summarize Payment & Adjustment numbers finish 2018-05-09 11:14:08"""
"1","
"
